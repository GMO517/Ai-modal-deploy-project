<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>格式化輸入顯示</title>

</head>

<body>
  <input type="file" name="files" id="files" value="" />
  <div class="chat-messages" style="background-color: rgb(106, 183, 255);">
    資料顯示區塊
  </div>
</body>

<script type="text/javascript">
  let files = document.getElementById('files');
  files.onchange = function () {
    let file = files.files[0];
    let reader = new FileReader();
    reader.readAsText(file, 'gb2312');

    reader.onload = function () {
      let originData = reader.result;
      //未處理的資料
      const sectionKeyWord = "*************************************************************************";
      const splitKeyWord = "\n";
      //切割用keyword
      let section = originData.split(sectionKeyWord);

      console.log(sectionKeyWord);
      console.log(section);
      // 先切三塊
      let NewData = section.toString().split(splitKeyWord);
      //再切分句 **記得要轉回字串才能處理
      console.log(NewData[0]);
      //一行一行拆開來列印 TODO
      // for (i = 0; i < NewData.length; i++) {
      //   console.log(NewData[i]);
      //   //過濾空句子
      //   if (NewData[i] != "") {
      //     createForm(NewData[i]);
      //   }
      // }



      function createForm(x) {
        //創造form區 
        const div = document.createElement('div');
        div.classList.add('message');
        const p = document.createElement('p');
        p.classList.add('meta');
        p.innerText = x;
        div.appendChild(p);
        document.querySelector('.chat-messages').appendChild(div);
      }
    }
  } 
</script>

</html>